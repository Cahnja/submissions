<html>
	<head>
		<style>
		#s {border:1px solid;}
		</style>
	</head>

	<body>
		<svg class="where" id="s" height=400 width=800>
		</svg>

		<input type="submit" id="go" value="go">

		<script>

			var addCircle = function(s,x,y,r,c){
				var c1= document.createElementNS("http://www.w3.org/2000/svg", "circle");
				c1.setAttribute('ch', y);
				c1.setAttribute('cx', x);
				c1.setAttribute('cy', y);
				c1.setAttribute('r', r);
				c1.setAttribute('fill', c);
				var s = document.getElementById("s");
				s.appendChild(c1);
			}

			var clicked = function(e){
				e.preventDefault();
				if(e.toElement!=this) {return;}
				console.log("clicked");
				s=document.getElementById("s");
				var r = 5+40*Math.random()
				addCircle(s, e.offsetX, e.offsetY, r, 'blue');
			}

			 var fall = function(){
				var cs = document.getElementsByTagName("circle");
				var y = parseFloat(cs[i].getAttribute('cy'));
				while(y > 0){
					for (var i=1; i<cs.length; i++){
						var x = parseFloat(cs[i].getAttribute('cx'));
						//var y = parseFloat(cs[i].getAttribute('cy'));
						y = y - 0.3;
						x = x + 0.1;
						cs[i].setAttribute('cx', x);
						cs[i].setAttribute('cy', y);
					}
				}

			 }

			 var up = function(){
			 	var cs = document.getElementsByTagName("circle");
			 	var h = parseFloat(cs[i].getAttribute('ch'));
			 	while (h <= (h/2)){
			 		var y = parseFloat(cs[i].getAttribute('cy'));
			 		y = y + 0.1;
			 		cs[i].setAttribute('cy', y);

			 	}
			 	cs[i].setAttribute('ch', (h/2));
			 }

			 var go = function(e) {
			 	e.preventDefault();
			 	var cs = document.getElementsByTagName("circle");
			 	var h= parseFloat(cs[i].getAttribute('ch'));
			 	if (h == 0){ up() }
			 	else { fall() }
			 }

			var s = document.getElementById("s");
			s.addEventListener('click', clicked);
			var g = document.getElementById("go");
			g.addEventListener("click", go);
		</script>

	</body>
</html>