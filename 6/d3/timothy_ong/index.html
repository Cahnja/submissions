<html>

  <head>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>

  <body>
    
    <h1>Breakdown of a Stuy Senior's Time</h1>
    <div>
    <input type="button" id="click" value="Day Before SoftDev Project is Due (doesnt work)"></input>
    </div>
    
    <script>

      var data = [
      {'y':7.5, 'hours':'School'},
      {'y':2, 'hours':'Commute'},
      {'y':6, 'hours':'Sleep'},
      {'y':4, 'hours':'Netflix'},
      {'y':0.5, 'hours':'SoftDev Project'},
      {'y':0, 'hours':'Graphics Project'},
      {'y':0.5, 'hours':'Coco HW'},
      {'y':1, 'hours':'AP Latin HW'},
      {'y':0.5, 'hours':'Other HW'},
      {'y':2, 'hours':'etc'}];

      var data1 = [
      {'y':7.5, 'hours':'School'},
      {'y':2, 'hours':'Commute'},
      {'y':2, 'hours':'Sleep'},
      {'y':4, 'hours':'Netflix'},
      {'y':8, 'hours':'SoftDev Project'},
      {'y':0, 'hours':'Graphics Project'},
      {'y':0, 'hours':'Coco HW'},
      {'y':0, 'hours':'AP LatinHW'},
      {'y':0, 'hours':'Other HW'},
      {'y':0.5, 'hours':'etc'}];

      var width = 600, height = 600;
      
      var xScale = d3.scale.linear()
      .domain([0,data.length])
      .range([0,width]);
      
      var yScale = d3.scale.linear()
      .domain([0,12])
      .range([height-30,0]);
      
      var svg = d3.select("body").append("svg")
      .attr('width',width)
      .attr('height', height)
      .attr('id', 'svg')
      .style('border','1px solid');

      var bars = svg.selectAll('bars')
      .data(data)
      .enter()
      .append('g')
      .attr('class','bars');

      bars.append("rect")
      .attr('x', function(d,i){return i* 55 + 50;})
      .attr('y', function(d){return yScale(d.y) + 5;})
      .attr('width', function(d){return 45;})
      .attr('height', function(d){return height - 20 -  yScale(d.y);})
      .attr('class','foof')
      .attr('fill','steelblue');

      bars.append("text")
      .attr('x', function(d,i){return i* 55 + 50;})
      .attr('y', function(d){return yScale(d.y);})
      .attr('font-family', 'sans-serif')
      .attr('font-size','12px')
      .attr('fill','black')
      .text(function(d){ return d.hours;});
      
      var yAxis = d3.svg.axis()
      .scale(yScale)
      .ticks(5)
      .orient('left');

      svg.append("g")
      .attr('class','axis')
      .attr('transform', 'translate (40,15)')
      .call(yAxis);

      var clicknum = 0;

      d3.select("#click").on('click',function(d) {
      if (clicknum % 2 == 0){ 
      
           
      var bars = svg.selectAll('bars')
      .data(data1)
      .enter()
      .append('g')
      .attr('class','bars');
      
      svg.selectAll("rect")
      .transition()
      .duration(1000)
      .attr('x', function(d,i){return i* 55 + 50;})
      .attr('y', function(d){return yScale(d.y) + 5;})
      .attr('width', function(d){return 45;})
      .attr('height', function(d){return height - 20 -  yScale(d.y);})
      .attr('class','foof')
      .attr('fill','steelblue');
      }

      else {
     
      var bars = svg.selectAll('bars')
      .data(data)
      .enter()
      .append('g')
      .attr('class','bars');

      svg.selectAll("rect")
      .transition()
      .duration(1000)
      .attr('x', function(d,i){return i* 55 + 50;})
      .attr('y', function(d){return yScale(d.y) + 5;})
      .attr('width', function(d){return 45;})
      .attr('height', function(d){return height - 20 -  yScale(d.y);})
      .attr('class','foof')
      .attr('fill','steelblue');
       }
      clicknum = clicknum+ 1;
      });


      </script>

  </body>

</html>
